{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/lib/supabase-client.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.error('Supabase URL ou Anon Key não configurados no .env.local');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n  },\n});\n\n// Helper functions para Auth\nexport async function signIn(email: string, password: string) {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n  if (error) throw error;\n  return data;\n}\n\nexport async function signOut() {\n  const { error } = await supabase.auth.signOut();\n  if (error) throw error;\n}\n\nexport async function resetPassword(email: string) {\n  const { data, error } = await supabase.auth.resetPasswordForEmail(email);\n  if (error) throw error;\n  return data;\n}\n\n// Export default para compatibilidade\nexport default supabase;\n"],"names":[],"mappings":";;;;;;;AAEoB;AAFpB;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,sFAA6C;AAErE,uCAAsC;;AAEtC;AAEO,MAAM,WAAW,CAAA,GAAA,iLAAA,CAAA,eAAY,AAAD,EAAE,aAAa,iBAAiB;IACjE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;IACpB;AACF;AAGO,eAAe,OAAO,KAAa,EAAE,QAAgB;IAC1D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IACA,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAC7C,IAAI,OAAO,MAAM;AACnB;AAEO,eAAe,cAAc,KAAa;IAC/C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,qBAAqB,CAAC;IAClE,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;uCAGe"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/lib/accessControl.ts"],"sourcesContent":["/**\n * Controle de Acesso por Perfil\n * Define quais rotas cada perfil pode acessar\n */\n\nimport { UserRole } from './types/business';\n\nconst PUBLIC_ROUTES = ['/login', '/reset-password', '/criar-conta'];\n\nexport function isPublicRoute(pathname: string): boolean {\n  return PUBLIC_ROUTES.some((route) => pathname === route || pathname.startsWith(route + '/'));\n}\n\n// Rotas permitidas para cada perfil\nexport const ALLOWED_ROUTES: Record<UserRole, string[]> = {\n  developer: ['*'], // Acesso total (apenas developer mantém acesso irrestrito)\n  admin: [\n    '/',\n    '/perfil',\n    '/solicitacoes',\n    '/checklists',\n    '/checklists/relatorios',\n    '/inventario',\n    '/planogramas',\n    '/relatorios',\n    '/notificacoes',\n    '/mensagens',\n  ],\n  buyer: [\n    '/',\n    '/perfil',\n    '/solicitacoes',\n    '/checklists/relatorios',\n    '/relatorios',\n    '/notificacoes',\n    '/mensagens',\n  ],\n  manager: [\n    '/',\n    '/perfil',\n    '/checklists/relatorios',\n    '/relatorios',\n    '/notificacoes',\n    '/mensagens',\n  ],\n  agent: [\n    '/',\n    '/perfil',\n    '/checklists/relatorios',\n    '/relatorios',\n    '/notificacoes',\n    '/mensagens',\n  ],\n};\n\n/**\n * Verifica se o usuário tem permissão para acessar uma rota\n */\nexport function canAccessRoute(userRole: UserRole | undefined, pathname: string): boolean {\n  if (isPublicRoute(pathname)) {\n    return true;\n  }\n\n  // Sem role, sem acesso (exceto login)\n  if (!userRole) {\n    return pathname === '/login';\n  }\n\n  const allowedRoutes = ALLOWED_ROUTES[userRole];\n\n  // Acesso total para developer e admin\n  if (allowedRoutes.includes('*')) {\n    return true;\n  }\n\n  // Rota de login sempre permitida\n  if (pathname === '/login') {\n    return true;\n  }\n\n  // Verifica se a rota está na lista de permitidas\n  // Suporta rotas exatas e rotas com subrotas\n  return allowedRoutes.some((route) => {\n    // Rota exata\n    if (pathname === route) {\n      return true;\n    }\n    // Subrota (ex: /checklists/relatorios permite /checklists/relatorios/123)\n    if (pathname.startsWith(route + '/')) {\n      return true;\n    }\n    return false;\n  });\n}\n\n/**\n * Verifica se o usuário pode ver um item do menu\n */\nexport function canAccessMenuItem(userRole: UserRole | undefined, allowedRoles: string[] | undefined): boolean {\n  // Se não há restrição de roles, todos podem ver\n  if (!allowedRoles || allowedRoles.length === 0) {\n    return true;\n  }\n\n  // Se não há role de usuário, não pode ver\n  if (!userRole) {\n    return false;\n  }\n\n  // Verifica se o role do usuário está na lista de permitidos\n  return allowedRoles.includes(userRole);\n}\n\n/**\n * Obtém a rota de redirecionamento padrão para cada perfil\n */\nexport function getDefaultRoute(userRole: UserRole): string {\n  // Todos os perfis vão para o dashboard por padrão\n  return '/';\n}\n\n/**\n * Verifica se o usuário é developer (acesso total)\n */\nexport function isDeveloper(userRole: UserRole | undefined): boolean {\n  return userRole === 'developer';\n}\n\n/**\n * Verifica se o usuário tem permissão de admin\n */\nexport function isAdmin(userRole: UserRole | undefined): boolean {\n  return userRole === 'admin';\n}\n\n/**\n * Verifica se o usuário tem permissões elevadas (developer ou admin)\n */\nexport function hasElevatedPermissions(userRole: UserRole | undefined): boolean {\n  return userRole === 'developer' || userRole === 'admin';\n}\n\n/**\n * Verifica se o usuário tem permissão de gestão limitada\n */\nexport function isManager(userRole: UserRole | undefined): boolean {\n  return userRole === 'manager';\n}\n\n/**\n * Verifica se o usuário é um agente\n */\nexport function isAgent(userRole: UserRole | undefined): boolean {\n  return userRole === 'agent';\n}\n\n/**\n * Verifica se o usuário tem acesso limitado (manager ou agent)\n */\nexport function hasLimitedAccess(userRole: UserRole | undefined): boolean {\n  return isManager(userRole) || isAgent(userRole);\n}\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;;AAID,MAAM,gBAAgB;IAAC;IAAU;IAAmB;CAAe;AAE5D,SAAS,cAAc,QAAgB;IAC5C,OAAO,cAAc,IAAI,CAAC,CAAC,QAAU,aAAa,SAAS,SAAS,UAAU,CAAC,QAAQ;AACzF;AAGO,MAAM,iBAA6C;IACxD,WAAW;QAAC;KAAI;IAChB,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,SAAS;QACP;QACA;QACA;QACA;QACA;QACA;KACD;IACD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;KACD;AACH;AAKO,SAAS,eAAe,QAA8B,EAAE,QAAgB;IAC7E,IAAI,cAAc,WAAW;QAC3B,OAAO;IACT;IAEA,sCAAsC;IACtC,IAAI,CAAC,UAAU;QACb,OAAO,aAAa;IACtB;IAEA,MAAM,gBAAgB,cAAc,CAAC,SAAS;IAE9C,sCAAsC;IACtC,IAAI,cAAc,QAAQ,CAAC,MAAM;QAC/B,OAAO;IACT;IAEA,iCAAiC;IACjC,IAAI,aAAa,UAAU;QACzB,OAAO;IACT;IAEA,iDAAiD;IACjD,4CAA4C;IAC5C,OAAO,cAAc,IAAI,CAAC,CAAC;QACzB,aAAa;QACb,IAAI,aAAa,OAAO;YACtB,OAAO;QACT;QACA,0EAA0E;QAC1E,IAAI,SAAS,UAAU,CAAC,QAAQ,MAAM;YACpC,OAAO;QACT;QACA,OAAO;IACT;AACF;AAKO,SAAS,kBAAkB,QAA8B,EAAE,YAAkC;IAClG,gDAAgD;IAChD,IAAI,CAAC,gBAAgB,aAAa,MAAM,KAAK,GAAG;QAC9C,OAAO;IACT;IAEA,0CAA0C;IAC1C,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,4DAA4D;IAC5D,OAAO,aAAa,QAAQ,CAAC;AAC/B;AAKO,SAAS,gBAAgB,QAAkB;IAChD,kDAAkD;IAClD,OAAO;AACT;AAKO,SAAS,YAAY,QAA8B;IACxD,OAAO,aAAa;AACtB;AAKO,SAAS,QAAQ,QAA8B;IACpD,OAAO,aAAa;AACtB;AAKO,SAAS,uBAAuB,QAA8B;IACnE,OAAO,aAAa,eAAe,aAAa;AAClD;AAKO,SAAS,UAAU,QAA8B;IACtD,OAAO,aAAa;AACtB;AAKO,SAAS,QAAQ,QAA8B;IACpD,OAAO,aAAa;AACtB;AAKO,SAAS,iBAAiB,QAA8B;IAC7D,OAAO,UAAU,aAAa,QAAQ;AACxC"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { User as SupabaseUser } from '@supabase/supabase-js';\nimport supabase, {\n  signIn as supabaseSignIn,\n  signOut as supabaseSignOut,\n  resetPassword as supabaseResetPassword,\n} from '@/lib/supabase-client';\nimport { User } from '@/lib/types/business';\nimport { canAccessRoute, isPublicRoute } from '@/lib/accessControl';\n\ninterface AuthUser {\n  uid: string;\n  email: string | null;\n  displayName: string | null;\n  photoURL: string | null;\n  getIdToken: (forceRefresh?: boolean) => Promise<string>;\n}\n\ninterface AuthContextData {\n  user: User | null;\n  firebaseUser: AuthUser | null;\n  loading: boolean;\n  signIn: (email: string, password: string) => Promise<void>;\n  signOut: () => Promise<void>;\n  resetPassword: (email: string) => Promise<void>;\n  refreshUser: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextData>({} as AuthContextData);\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nasync function getAccessToken(): Promise<string> {\n  const { data } = await supabase.auth.getSession();\n  return data.session?.access_token || '';\n}\n\nfunction buildAuthUser(user: SupabaseUser | null): AuthUser | null {\n  if (!user) return null;\n  return {\n    uid: user.id,\n    email: user.email ?? null,\n    displayName: (user.user_metadata?.display_name as string | undefined) || user.email || null,\n    photoURL: (user.user_metadata?.avatar_url as string | undefined) || null,\n    getIdToken: async () => getAccessToken(),\n  };\n}\n\nexport function AuthProvider({ children }: AuthProviderProps) {\n  const [user, setUser] = useState<User | null>(null);\n  const [firebaseUser, setFirebaseUser] = useState<AuthUser | null>(null);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n  const pathname = usePathname();\n\n  const fetchUserProfile = async (accessToken?: string) => {\n    const token = accessToken || (await getAccessToken());\n    if (!token) {\n      setUser(null);\n      return;\n    }\n\n    const res = await fetch('/api/auth/me', {\n      headers: { Authorization: `Bearer ${token}` },\n      cache: 'no-store',\n    });\n\n    if (!res.ok) {\n      if (res.status === 404) {\n        await supabaseSignOut();\n      }\n      setUser(null);\n      return;\n    }\n\n    const data = await res.json();\n    setUser(data.user || null);\n  };\n\n  useEffect(() => {\n    let isMounted = true;\n\n    const initSession = async () => {\n      const { data } = await supabase.auth.getSession();\n      if (!isMounted) return;\n      const currentUser = data.session?.user ?? null;\n      setFirebaseUser(buildAuthUser(currentUser));\n      if (currentUser) {\n        await fetchUserProfile(data.session?.access_token);\n      } else {\n        setUser(null);\n      }\n      setLoading(false);\n    };\n\n    initSession();\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (_event, session) => {\n      if (!isMounted) return;\n      const currentUser = session?.user ?? null;\n      setFirebaseUser(buildAuthUser(currentUser));\n      if (currentUser) {\n        await fetchUserProfile(session?.access_token);\n      } else {\n        setUser(null);\n      }\n      setLoading(false);\n    });\n\n    return () => {\n      isMounted = false;\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  // Atualizar presença (lastSeen) do usuário a cada 2 minutos\n  useEffect(() => {\n    if (!user?.uid) {\n      return;\n    }\n\n    const updatePresence = async () => {\n      try {\n        const token = await getAccessToken();\n        if (!token) return;\n        await fetch('/api/auth/last-seen', {\n          method: 'POST',\n          headers: { Authorization: `Bearer ${token}` },\n        });\n      } catch (error) {\n        console.error('Erro ao atualizar presença:', error);\n      }\n    };\n\n    updatePresence();\n    const intervalId = setInterval(updatePresence, 120000);\n\n    const handleFocus = () => {\n      updatePresence();\n    };\n    window.addEventListener('focus', handleFocus);\n\n    return () => {\n      clearInterval(intervalId);\n      window.removeEventListener('focus', handleFocus);\n    };\n  }, [user?.uid]);\n\n  // Redirecionar para login se não autenticado e controlar acesso por perfil\n  useEffect(() => {\n    if (!loading && !user && !isPublicRoute(pathname)) {\n      router.push('/login');\n      return;\n    }\n\n    if (!loading && user && !isPublicRoute(pathname)) {\n      const hasAccess = canAccessRoute(user.role, pathname);\n\n      if (!hasAccess) {\n        console.warn(`Acesso negado para ${user.role} na rota ${pathname}`);\n        router.push('/');\n      }\n    }\n  }, [loading, user, pathname, router]);\n\n  const signIn = async (email: string, password: string) => {\n    try {\n      await supabaseSignIn(email, password);\n      router.push('/');\n    } catch (error: any) {\n      console.error('Erro ao fazer login:', error);\n      throw error;\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      await supabaseSignOut();\n      router.push('/login');\n    } catch (error: any) {\n      console.error('Erro ao fazer logout:', error);\n    }\n  };\n\n  const resetPassword = async (email: string) => {\n    try {\n      await supabaseResetPassword(email);\n    } catch (error: any) {\n      console.error('Erro ao enviar email de redefinição de senha:', error);\n      throw error;\n    }\n  };\n\n  const refreshUser = async () => {\n    await fetchUserProfile();\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, firebaseUser, loading, signIn, signOut, resetPassword, refreshUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth deve ser usado dentro de AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\nimport {\n  LayoutDashboard,\n  FileText,\n  Users,\n  Store,\n  Package,\n  BarChart3,\n  Settings,\n  Bell,\n  MessageSquare,\n  ChevronLeft,\n  ChevronRight,\n  LogOut,\n  UserCircle,\n  User,\n  Building,\n  X,\n  CheckSquare,\n  LayoutGrid,\n  Maximize,\n  Minimize,\n  ClipboardList,\n  Activity,\n  type LucideIcon,\n} from 'lucide-react';\n\n// ============================================================================\n// TYPES & CONFIG\n// ============================================================================\n\ninterface MenuItem {\n  name: string;\n  href: string;\n  icon: LucideIcon;\n  badge?: number;\n  allowedRoles?: string[];\n  group: 'principal' | 'operacional' | 'gestao' | 'sistema';\n}\n\nconst menuItems: MenuItem[] = [\n  { name: 'Dashboard', href: '/', icon: LayoutDashboard, group: 'principal' },\n  { name: 'Meu Perfil', href: '/perfil', icon: User, group: 'principal' },\n  { name: 'Solicitações', href: '/solicitacoes', icon: FileText, group: 'operacional', allowedRoles: ['developer', 'admin', 'buyer'] },\n  { name: 'Checklists', href: '/checklists', icon: CheckSquare, group: 'operacional', allowedRoles: ['developer', 'admin'] },\n  { name: 'Relatórios Checklists', href: '/checklists/relatorios', icon: BarChart3, group: 'operacional', allowedRoles: ['developer', 'admin', 'buyer', 'manager', 'agent'] },\n  { name: 'Inventário', href: '/inventario', icon: ClipboardList, group: 'operacional', allowedRoles: ['developer', 'admin'] },\n  { name: 'Planogramas', href: '/planogramas', icon: LayoutGrid, group: 'operacional', allowedRoles: ['developer', 'admin'] },\n  { name: 'Usuários', href: '/usuarios', icon: Users, group: 'gestao', allowedRoles: ['developer'] },\n  { name: 'Lojas', href: '/lojas', icon: Store, group: 'gestao', allowedRoles: ['developer'] },\n  { name: 'Empresas', href: '/empresas', icon: Building, group: 'gestao', allowedRoles: ['developer'] },\n  { name: 'Produtos', href: '/produtos', icon: Package, group: 'gestao', allowedRoles: ['developer'] },\n  { name: 'Relatórios', href: '/relatorios', icon: BarChart3, group: 'gestao', allowedRoles: ['developer', 'admin', 'buyer', 'manager', 'agent'] },\n  { name: 'Notificações', href: '/notificacoes', icon: Bell, group: 'sistema', allowedRoles: ['developer', 'admin', 'buyer', 'manager', 'agent'] },\n  { name: 'Mensagens', href: '/mensagens', icon: MessageSquare, group: 'sistema', allowedRoles: ['developer', 'admin', 'buyer', 'manager', 'agent'] },\n  { name: 'Monitoramento', href: '/monitoramento', icon: Activity, group: 'sistema', allowedRoles: ['developer'] },\n  { name: 'Configurações', href: '/configuracoes', icon: Settings, group: 'sistema', allowedRoles: ['developer'] },\n];\n\nconst groupConfig = {\n  principal: { label: 'Principal', order: 0 },\n  operacional: { label: 'Operacional', order: 1 },\n  gestao: { label: 'Gestão', order: 2 },\n  sistema: { label: 'Sistema', order: 3 },\n};\n\ninterface SidebarProps {\n  collapsed?: boolean;\n  onToggle?: () => void;\n  mobileOpen?: boolean;\n  onMobileClose?: () => void;\n  isMobile?: boolean;\n}\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\nexport default function Sidebar({\n  collapsed = false,\n  onToggle,\n  mobileOpen = false,\n  onMobileClose,\n  isMobile = false\n}: SidebarProps) {\n  const pathname = usePathname();\n  const { user, firebaseUser, signOut } = useAuth();\n  const [solBadge, setSolBadge] = useState<number | undefined>();\n  const [notifBadge, setNotifBadge] = useState<number | undefined>();\n  const [isFullscreen, setIsFullscreen] = useState(false);\n\n  // Fetch badges\n  useEffect(() => {\n    let cancelled = false;\n    const fetchBadges = async () => {\n      try {\n        const [dashRes, notifRes] = await Promise.all([\n          fetch('/api/dashboard', { cache: 'no-store' }),\n          fetch('/api/notificacoes?count=true', { cache: 'no-store' })\n        ]);\n\n        if (dashRes.ok) {\n          const data = await dashRes.json();\n          const pending = data?.solicitacoesPorStatus?.pending;\n          if (!cancelled) setSolBadge(pending > 0 ? pending : undefined);\n        }\n\n        if (notifRes.ok) {\n          const data = await notifRes.json();\n          if (!cancelled) setNotifBadge(data.count > 0 ? data.count : undefined);\n        }\n      } catch { /* ignore */ }\n    };\n\n    fetchBadges();\n    const interval = setInterval(fetchBadges, 30000);\n    return () => { cancelled = true; clearInterval(interval); };\n  }, []);\n\n  // Fullscreen detection\n  useEffect(() => {\n    const handler = () => {\n      setIsFullscreen(!!(\n        document.fullscreenElement ||\n        (document as any).webkitFullscreenElement\n      ));\n    };\n\n    document.addEventListener('fullscreenchange', handler);\n    document.addEventListener('webkitfullscreenchange', handler);\n    return () => {\n      document.removeEventListener('fullscreenchange', handler);\n      document.removeEventListener('webkitfullscreenchange', handler);\n    };\n  }, []);\n\n  // Toggle fullscreen\n  const toggleFullscreen = async () => {\n    try {\n      if (!isFullscreen) {\n        await document.documentElement.requestFullscreen?.();\n      } else {\n        await document.exitFullscreen?.();\n      }\n    } catch (e) {\n      console.error('Fullscreen error:', e);\n    }\n  };\n\n  // Filter menu items by role\n  const filteredItems = menuItems.filter(item => {\n    if (!item.allowedRoles?.length) return true;\n    return item.allowedRoles.includes(user?.role || '');\n  });\n\n  // Group items\n  const groupedItems = {\n    principal: filteredItems.filter(i => i.group === 'principal'),\n    operacional: filteredItems.filter(i => i.group === 'operacional'),\n    gestao: filteredItems.filter(i => i.group === 'gestao'),\n    sistema: filteredItems.filter(i => i.group === 'sistema'),\n  };\n\n  // Get badge for item\n  const getBadge = (href: string) => {\n    if (href === '/solicitacoes') return solBadge;\n    if (href === '/notificacoes') return notifBadge;\n    return undefined;\n  };\n\n  return (\n    <>\n      {/* Mobile Overlay */}\n      {mobileOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden\"\n          onClick={onMobileClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <aside\n        style={{ width: collapsed ? '80px' : '288px' }}\n        aria-hidden={isMobile && !mobileOpen}\n        className={`bg-gradient-to-b from-[#16476A] via-[#3B9797] to-[#132440] text-white flex flex-col transition-all duration-300 ease-in-out fixed left-0 top-0 h-screen z-50 shadow-2xl ${\n          isMobile\n            ? (mobileOpen\n              ? 'translate-x-0 opacity-100 pointer-events-auto'\n              : '-translate-x-full opacity-0 pointer-events-none')\n            : 'translate-x-0 opacity-100 pointer-events-auto'\n        }`}\n      >\n        {/* ================================================================ */}\n        {/* HEADER */}\n        {/* ================================================================ */}\n        <div className=\"flex-shrink-0 p-5 border-b border-white/20\">\n          <div className={`flex items-center ${collapsed ? 'justify-center' : 'gap-4'}`}>\n            {/* Logo */}\n            <div className=\"relative flex-shrink-0\">\n              <img\n                src=\"/icons/GestaoInternaIcon.png\"\n                alt=\"Logo\"\n                style={{ width: collapsed ? '48px' : '56px', height: collapsed ? '48px' : '56px' }}\n                className=\"rounded-2xl shadow-lg\"\n              />\n              <span style={{ width: '14px', height: '14px' }} className=\"absolute -bottom-1 -right-1 bg-emerald-400 rounded-full border-2 border-[#16476A]\" />\n            </div>\n\n            {/* Brand */}\n            {!collapsed && (\n              <div className=\"flex-1 min-w-0\">\n                <h1 className=\"text-xl font-bold tracking-tight\">MyInventory</h1>\n                <p className=\"text-[11px] text-white/60 font-medium uppercase tracking-widest\">\n                  Gestão Interna\n                </p>\n              </div>\n            )}\n\n            {/* Mobile Close */}\n            {!collapsed && onMobileClose && (\n              <button\n                onClick={onMobileClose}\n                className=\"lg:hidden p-2 hover:bg-white/10 rounded-lg transition-colors\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* ================================================================ */}\n        {/* NAVIGATION */}\n        {/* ================================================================ */}\n        <nav className=\"flex-1 overflow-y-auto py-4 px-3 scrollbar-thin scrollbar-thumb-white/20\">\n          {(['principal', 'operacional', 'gestao', 'sistema'] as const).map(groupKey => {\n            const items = groupedItems[groupKey];\n            if (!items.length) return null;\n\n            return (\n              <div key={groupKey} className=\"mb-6\">\n                {/* Group Label */}\n                {!collapsed && (\n                  <h2 className=\"px-3 mb-2 text-[11px] font-semibold text-white/50 uppercase tracking-wider\">\n                    {groupConfig[groupKey].label}\n                  </h2>\n                )}\n\n                {/* Collapsed Divider */}\n                {collapsed && groupKey !== 'principal' && (\n                  <div className=\"mx-2 mb-3 border-t border-white/20\" />\n                )}\n\n                {/* Menu Items */}\n                <ul className=\"space-y-1\">\n                  {items.map(item => {\n                    const isActive = pathname === item.href;\n                    const Icon = item.icon;\n                    const badge = getBadge(item.href);\n\n                    return (\n                      <li key={item.href}>\n                        <Link\n                          href={item.href}\n                          onClick={onMobileClose}\n                          title={collapsed ? item.name : undefined}\n                          className={`group relative flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${collapsed ? 'justify-center' : ''} ${isActive ? 'bg-white text-[#16476A] shadow-lg font-semibold' : 'text-white/80 hover:bg-white/10 hover:text-white'}`}\n                        >\n                          {/* Active Indicator */}\n                          {isActive && !collapsed && (\n                            <span className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-7 bg-[#16476A] rounded-r-full -ml-3\" />\n                          )}\n\n                          {/* Icon */}\n                          <Icon\n                            className={`flex-shrink-0 transition-transform duration-200 ${collapsed ? 'w-6 h-6' : 'w-5 h-5'} ${!isActive ? 'group-hover:scale-110' : ''}`}\n                            strokeWidth={isActive ? 2.5 : 2}\n                          />\n\n                          {/* Label & Badge */}\n                          {!collapsed && (\n                            <>\n                              <span className=\"flex-1 text-sm truncate\">{item.name}</span>\n                              {badge && (\n                                <span className=\"bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow\">\n                                  {badge > 99 ? '99+' : badge}\n                                </span>\n                              )}\n                            </>\n                          )}\n\n                          {/* Collapsed Badge */}\n                          {collapsed && badge && (\n                            <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-[10px] font-bold text-white rounded-full flex items-center justify-center border-2 border-[#16476A]\">\n                              {badge > 9 ? '9+' : badge}\n                            </span>\n                          )}\n                        </Link>\n                      </li>\n                    );\n                  })}\n                </ul>\n              </div>\n            );\n          })}\n        </nav>\n\n        {/* ================================================================ */}\n        {/* FOOTER */}\n        {/* ================================================================ */}\n        <div className=\"flex-shrink-0 p-4 border-t border-white/20 bg-black/10\">\n          {/* User Card */}\n          {!collapsed ? (\n            <div className=\"bg-white/10 backdrop-blur-sm rounded-xl p-4 mb-4 border border-white/10\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"relative flex-shrink-0\">\n                  {firebaseUser?.photoURL ? (\n                    <img\n                      src={firebaseUser.photoURL}\n                      alt=\"Avatar\"\n                      style={{ width: '40px', height: '40px' }}\n                      className=\"rounded-full object-cover ring-2 ring-white/30\"\n                    />\n                  ) : (\n                    <div style={{ width: '40px', height: '40px' }} className=\"rounded-full bg-white/20 flex items-center justify-center ring-2 ring-white/30\">\n                      <UserCircle style={{ width: '24px', height: '24px' }} />\n                    </div>\n                  )}\n                  <span className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-400 rounded-full border-2 border-[#16476A]\" />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-semibold truncate\">{user?.displayName || 'Usuário'}</p>\n                  <p className=\"text-xs text-white/60 truncate\">{user?.email}</p>\n                </div>\n              </div>\n              <button\n                onClick={() => signOut()}\n                className=\"w-full flex items-center justify-center gap-2 py-2.5 bg-white/10 hover:bg-red-500/80 rounded-lg transition-all duration-200 text-sm font-medium border border-white/10 hover:border-red-400\"\n              >\n                <LogOut style={{ width: '16px', height: '16px' }} />\n                Sair da Conta\n              </button>\n            </div>\n          ) : (\n            <div className=\"flex justify-center mb-4\">\n              <button\n                onClick={() => signOut()}\n                title=\"Sair da conta\"\n                className=\"relative group\"\n              >\n                {firebaseUser?.photoURL ? (\n                  <img\n                    src={firebaseUser.photoURL}\n                    alt=\"Avatar\"\n                    style={{ width: '40px', height: '40px' }}\n                    className=\"rounded-full object-cover ring-2 ring-white/30 group-hover:ring-red-400 transition-all\"\n                  />\n                ) : (\n                  <div style={{ width: '40px', height: '40px' }} className=\"rounded-full bg-white/20 flex items-center justify-center ring-2 ring-white/30 group-hover:ring-red-400 transition-all\">\n                    <UserCircle style={{ width: '24px', height: '24px' }} />\n                  </div>\n                )}\n                <span className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-400 group-hover:bg-red-500 rounded-full border-2 border-[#16476A] transition-colors\" />\n              </button>\n            </div>\n          )}\n\n          {/* Action Buttons */}\n          <div className={`flex ${collapsed ? 'flex-col' : ''} gap-2`}>\n            {/* Fullscreen Button */}\n            <button\n              onClick={toggleFullscreen}\n              title={isFullscreen ? 'Sair da tela cheia' : 'Tela cheia'}\n              className={`flex items-center justify-center gap-2 py-3 rounded-xl bg-white/15 hover:bg-white/25 border border-white/20 hover:border-white/30 transition-all duration-200 group ${collapsed ? 'w-full' : 'flex-1'}`}\n            >\n              {isFullscreen ? (\n                <Minimize className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n              ) : (\n                <Maximize className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n              )}\n              {!collapsed && (\n                <span className=\"text-xs font-semibold\">\n                  {isFullscreen ? 'Sair Tela Cheia' : 'Tela Cheia'}\n                </span>\n              )}\n            </button>\n\n            {/* Collapse Button */}\n            {onToggle && (\n              <button\n                onClick={onToggle}\n                title={collapsed ? 'Expandir menu' : 'Recolher menu'}\n                className={`flex items-center justify-center gap-2 py-3 rounded-xl bg-white/15 hover:bg-white/25 border border-white/20 hover:border-white/30 transition-all duration-200 group ${collapsed ? 'w-full' : 'flex-1'}`}\n              >\n                {collapsed ? (\n                  <ChevronRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n                ) : (\n                  <>\n                    <ChevronLeft className=\"w-5 h-5 group-hover:-translate-x-1 transition-transform\" />\n                    <span className=\"text-xs font-semibold\">Recolher</span>\n                  </>\n                )}\n              </button>\n            )}\n          </div>\n        </div>\n      </aside>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1200, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1206, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/components/RoleGuard.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { UserRole } from '@/lib/types/business';\nimport { AlertTriangle } from 'lucide-react';\n\n/**\n * Definição de permissões por role\n *\n * - developer: Acesso total\n * - admin: Acesso total\n * - manager: Acesso a todas as páginas exceto gerenciamento de usuários\n * - buyer: Acesso a dashboard, solicitações e planograma\n * - agent: APENAS acesso a /inventario/[id]/coleta\n */\n\ninterface RoutePermissions {\n  allowedPaths: string[]; // Caminhos exatos permitidos\n  allowedPatterns: RegExp[]; // Padrões regex permitidos\n  defaultRedirect: string; // Rota padrão para redirecionar\n}\n\nconst ROLE_PERMISSIONS: Record<UserRole, RoutePermissions> = {\n  developer: {\n    allowedPaths: ['*'], // Acesso total\n    allowedPatterns: [/.*/],\n    defaultRedirect: '/',\n  },\n  admin: {\n    allowedPaths: ['*'], // Acesso total\n    allowedPatterns: [/.*/],\n    defaultRedirect: '/',\n  },\n  manager: {\n    allowedPaths: ['*'], // Acesso total exceto algumas rotas\n    allowedPatterns: [/.*/],\n    defaultRedirect: '/',\n  },\n  buyer: {\n    allowedPaths: [\n      '/',\n      '/solicitacoes',\n      '/planograma',\n      '/inventario',\n      '/lojas',\n      '/empresas',\n    ],\n    allowedPatterns: [\n      /^\\/$/,\n      /^\\/solicitacoes/,\n      /^\\/planograma/,\n      /^\\/inventario/,\n      /^\\/lojas/,\n      /^\\/empresas/,\n    ],\n    defaultRedirect: '/',\n  },\n  agent: {\n    allowedPaths: ['/inventario'], // APENAS a lista de inventários\n    allowedPatterns: [\n      /^\\/inventario$/, // APENAS /inventario (lista)\n      /^\\/inventario\\/[^/]+$/, // /inventario/{id} (detalhes do inventário)\n      /^\\/inventario\\/[^/]+\\/coleta$/, // /inventario/{id}/coleta (página de coleta)\n    ],\n    defaultRedirect: '/inventario', // Redireciona para lista de inventários\n  },\n};\n\n// Rotas que não devem ser protegidas\nconst PUBLIC_ROUTES = ['/login'];\n\ninterface RoleGuardProps {\n  children: React.ReactNode;\n}\n\nexport function RoleGuard({ children }: RoleGuardProps) {\n  const { user, loading } = useAuth();\n  const router = useRouter();\n  const pathname = usePathname();\n\n  useEffect(() => {\n    // Não verificar enquanto está carregando\n    if (loading) return;\n\n    // Permitir acesso a rotas públicas\n    if (PUBLIC_ROUTES.includes(pathname)) return;\n\n    // Se não há usuário, não fazer nada (AuthContext vai redirecionar)\n    if (!user) return;\n\n    // Verificar permissões\n    const permissions = ROLE_PERMISSIONS[user.role as UserRole];\n    if (!permissions) {\n      console.warn(`Role desconhecida: ${user.role}`);\n      router.push('/login');\n      return;\n    }\n\n    // Acesso total para developer e admin\n    if (permissions.allowedPaths.includes('*')) {\n      return;\n    }\n\n    // Verificar se a rota atual é permitida\n    const isAllowed =\n      permissions.allowedPaths.includes(pathname) ||\n      permissions.allowedPatterns.some((pattern) => pattern.test(pathname));\n\n    if (!isAllowed) {\n      console.warn(`Acesso negado para ${user.role} em ${pathname}`);\n\n      // Para agentes, redirecionar para a lista de inventários\n      // Para outros, redirecionar para a rota padrão\n      router.push(permissions.defaultRedirect);\n    }\n  }, [user, loading, pathname, router]);\n\n  // Mostrar loading enquanto verifica\n  if (loading) {\n    return <>{children}</>;\n  }\n\n  // Não mostrar nada se não há usuário (AuthContext vai redirecionar)\n  if (!user) {\n    return <>{children}</>;\n  }\n\n  // Verificar permissões para renderização\n  const permissions = ROLE_PERMISSIONS[user.role as UserRole];\n  if (!permissions) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-[#F5F5F5] p-4\">\n        <div className=\"bg-white rounded-2xl shadow-xl border border-[#E0E0E0] p-8 max-w-md text-center\">\n          <div className=\"w-16 h-16 bg-gradient-to-br from-[#BF092F] to-[#E82129] rounded-full flex items-center justify-center mx-auto mb-4\">\n            <AlertTriangle className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-[#212121] mb-2\">Acesso Negado</h1>\n          <p className=\"text-[#757575]\">Perfil de usuário desconhecido.</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Permitir acesso a rotas públicas\n  if (PUBLIC_ROUTES.includes(pathname)) {\n    return <>{children}</>;\n  }\n\n  // Acesso total para developer e admin\n  if (permissions.allowedPaths.includes('*')) {\n    return <>{children}</>;\n  }\n\n  // Verificar se a rota atual é permitida\n  const isAllowed =\n    permissions.allowedPaths.includes(pathname) ||\n    permissions.allowedPatterns.some((pattern) => pattern.test(pathname));\n\n  if (!isAllowed) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-[#F5F5F5] p-4\">\n        <div className=\"bg-white rounded-2xl shadow-xl border border-[#E0E0E0] p-8 max-w-md text-center\">\n          <div className=\"w-16 h-16 bg-gradient-to-br from-[#BF092F] to-[#E82129] rounded-full flex items-center justify-center mx-auto mb-4\">\n            <AlertTriangle className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-[#212121] mb-2\">Acesso Negado</h1>\n          <p className=\"text-[#757575] mb-6\">\n            Você não tem permissão para acessar esta página.\n          </p>\n          <button\n            onClick={() => router.push(permissions.defaultRedirect)}\n            className=\"bg-gradient-to-r from-[#1F53A2] to-[#2E67C3] text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n          >\n            Ir para Página Inicial\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1471, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1477, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/components/LayoutWrapper.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { usePathname, useRouter } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { isPublicRoute } from '@/lib/accessControl';\nimport { Menu, Maximize, Minimize, Share, X } from 'lucide-react';\nimport { io, Socket } from 'socket.io-client';\nimport { supabase } from '@/lib/supabase-client';\nimport Sidebar from './Sidebar';\nimport { RoleGuard } from './RoleGuard';\n\ninterface AppToast {\n  id: string;\n  title: string;\n  body?: string;\n  href?: string;\n}\n\nexport function LayoutWrapper({ children }: { children: React.ReactNode }) {\n  const pathname = usePathname();\n  const router = useRouter();\n  const { user, loading } = useAuth();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showFullscreenToast, setShowFullscreenToast] = useState(false);\n  const [showIOSInstructions, setShowIOSInstructions] = useState(false);\n  const [isStandalone, setIsStandalone] = useState(false);\n  const [isIOS, setIsIOS] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n  const [appToasts, setAppToasts] = useState<AppToast[]>([]);\n  const socketRef = useRef<Socket | null>(null);\n  const pendingCallRef = useRef<{\n    timerId?: number;\n    callerId?: string;\n    callerName?: string;\n    conversationId?: string;\n    callType?: 'voice' | 'video';\n  } | null>(null);\n\n  // Detectar se é mobile (< 1024px)\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 1024);\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Detectar iOS e modo standalone\n  useEffect(() => {\n    const ua = window.navigator.userAgent;\n    const iOS = /iPad|iPhone|iPod/.test(ua) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\n    const standalone = (window.navigator as any).standalone === true || window.matchMedia('(display-mode: standalone)').matches;\n\n    setIsIOS(iOS);\n    setIsStandalone(standalone);\n  }, []);\n\n  // Detectar mudanças no estado de fullscreen\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      const newFullscreenState = !!(\n        document.fullscreenElement ||\n        (document as any).webkitFullscreenElement ||\n        (document as any).mozFullScreenElement ||\n        (document as any).msFullscreenElement\n      );\n\n      setIsFullscreen(newFullscreenState);\n\n      // Mostrar notificação\n      if (!isIOS || !isStandalone) {\n        setShowFullscreenToast(true);\n        const timer = setTimeout(() => setShowFullscreenToast(false), 3000);\n        return () => clearTimeout(timer);\n      }\n    };\n\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    document.addEventListener('webkitfullscreenchange', handleFullscreenChange);\n    document.addEventListener('mozfullscreenchange', handleFullscreenChange);\n    document.addEventListener('MSFullscreenChange', handleFullscreenChange);\n\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n      document.removeEventListener('webkitfullscreenchange', handleFullscreenChange);\n      document.removeEventListener('mozfullscreenchange', handleFullscreenChange);\n      document.removeEventListener('MSFullscreenChange', handleFullscreenChange);\n    };\n  }, [isIOS, isStandalone]);\n\n  // Atalho de teclado F11\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'F11') {\n        e.preventDefault();\n        toggleFullscreen();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isFullscreen]);\n\n  const addToast = (toast: Omit<AppToast, 'id'> & { id?: string }) => {\n    const id = toast.id || `${Date.now()}-${Math.random().toString(16).slice(2)}`;\n    setAppToasts((prev) => [...prev, { ...toast, id }]);\n    window.setTimeout(() => {\n      setAppToasts((prev) => prev.filter((item) => item.id !== id));\n    }, 6000);\n  };\n\n  const notificationsEnabled = () => {\n    try {\n      return localStorage.getItem('pref.notifications') !== 'off';\n    } catch {\n      return true;\n    }\n  };\n\n  const notifyBrowser = async (title: string, body: string, href?: string) => {\n    if (!notificationsEnabled()) return;\n    if (!('Notification' in window)) return;\n    let permission = Notification.permission;\n    if (permission === 'default') {\n      try {\n        permission = await Notification.requestPermission();\n      } catch {\n        permission = 'default';\n      }\n    }\n    if (permission !== 'granted') return;\n    const notif = new Notification(title, { body });\n    notif.onclick = () => {\n      window.focus();\n      if (href) {\n        router.push(href);\n      }\n      notif.close();\n    };\n  };\n\n  const registerCallNotification = async (payload: {\n    receiverId: string;\n    callerId?: string;\n    callerName?: string;\n    conversationId?: string;\n    callType?: 'voice' | 'video';\n    status?: 'received' | 'missed';\n  }) => {\n    try {\n      const { data } = await supabase.auth.getSession();\n      const token = data.session?.access_token;\n      if (!token) return;\n      await fetch('/api/notificacoes/call', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(payload),\n      });\n    } catch (error) {\n      console.error('Erro ao registrar notificação de chamada:', error);\n    }\n  };\n\n  const clearPendingCall = () => {\n    if (pendingCallRef.current?.timerId) {\n      window.clearTimeout(pendingCallRef.current.timerId);\n    }\n    pendingCallRef.current = null;\n  };\n\n  useEffect(() => {\n    if (pathname?.startsWith('/mensagens')) {\n      clearPendingCall();\n    }\n  }, [pathname]);\n\n  useEffect(() => {\n    if (!user?.uid) return;\n    const channel = supabase\n      .channel(`global-messages-${user.uid}`)\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'chat_messages',\n          filter: `receiver_id=eq.${user.uid}`,\n        },\n        (payload) => {\n          const newMsg = payload.new as any;\n          if (!newMsg) return;\n          if (pathname?.startsWith('/mensagens')) return;\n\n          let attachments: any[] = [];\n          if (Array.isArray(newMsg.attachments)) {\n            attachments = newMsg.attachments;\n          } else if (typeof newMsg.attachments === 'string') {\n            try {\n              const parsed = JSON.parse(newMsg.attachments);\n              if (Array.isArray(parsed)) attachments = parsed;\n            } catch {\n              attachments = [];\n            }\n          }\n\n          const isImage = attachments.some((item) => item?.type === 'image');\n          const body =\n            (newMsg.text && String(newMsg.text).trim()) ||\n            (attachments.length > 0 ? (isImage ? 'Enviou uma imagem' : 'Enviou um arquivo') : 'Nova mensagem');\n          const senderName = newMsg.sender_name || 'Nova mensagem';\n          const href = newMsg.conversation_id ? `/mensagens/${newMsg.conversation_id}` : undefined;\n\n          addToast({\n            title: senderName,\n            body,\n            href,\n          });\n          void notifyBrowser(senderName, body, href);\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [pathname, router, user?.uid]);\n\n  useEffect(() => {\n    if (!user?.uid) return;\n    const signalingUrl = process.env.NEXT_PUBLIC_SIGNALING_SERVER_URL || 'http://localhost:3002';\n    const signalingPath = process.env.NEXT_PUBLIC_SIGNALING_SOCKET_PATH || '/socket.io';\n    const socket = io(signalingUrl, {\n      path: signalingPath,\n      transports: ['websocket'],\n      reconnection: true,\n    });\n    socketRef.current = socket;\n\n    socket.on('connect', () => {\n      socket.emit('register', { userId: user.uid, conversationId: 'global' });\n    });\n\n    socket.on('incoming-call', ({ callType, caller }) => {\n      if (pathname?.startsWith('/mensagens')) return;\n      const callerName = caller?.userId ? `Chamada de ${caller.userId}` : 'Chamada recebida';\n      const callLabel = callType === 'video' ? 'Chamada de vídeo' : 'Chamada de voz';\n      const href = caller?.conversationId ? `/mensagens/${caller.conversationId}` : undefined;\n\n      addToast({\n        title: callerName,\n        body: callLabel,\n        href,\n      });\n      void notifyBrowser(callerName, callLabel, href);\n      void registerCallNotification({\n        receiverId: user.uid,\n        callerId: caller?.userId,\n        conversationId: caller?.conversationId,\n        callType,\n        status: 'received',\n      });\n\n      clearPendingCall();\n      const timerId = window.setTimeout(() => {\n        if (!pendingCallRef.current) return;\n        void registerCallNotification({\n          receiverId: user.uid,\n          callerId: pendingCallRef.current.callerId,\n          callerName: pendingCallRef.current.callerName,\n          conversationId: pendingCallRef.current.conversationId,\n          callType: pendingCallRef.current.callType,\n          status: 'missed',\n        });\n        clearPendingCall();\n      }, 35000);\n\n      pendingCallRef.current = {\n        timerId,\n        callerId: caller?.userId,\n        callerName: caller?.displayName || caller?.userId,\n        conversationId: caller?.conversationId,\n        callType,\n      };\n    });\n\n    socket.on('call-ended', () => {\n      if (!pendingCallRef.current) return;\n      void registerCallNotification({\n        receiverId: user.uid,\n        callerId: pendingCallRef.current.callerId,\n        callerName: pendingCallRef.current.callerName,\n        conversationId: pendingCallRef.current.conversationId,\n        callType: pendingCallRef.current.callType,\n        status: 'missed',\n      });\n      clearPendingCall();\n    });\n\n    return () => {\n      socket.disconnect();\n      socketRef.current = null;\n      clearPendingCall();\n    };\n  }, [pathname, router, user?.uid]);\n\n  // Função para toggle fullscreen\n  const toggleFullscreen = async () => {\n    // Para iOS: mostrar instruções para adicionar à tela inicial\n    if (isIOS && !isStandalone) {\n      setShowIOSInstructions(true);\n      return;\n    }\n\n    // Para iOS já em modo standalone: não fazer nada (já está em tela cheia)\n    if (isIOS && isStandalone) {\n      setShowFullscreenToast(true);\n      setTimeout(() => setShowFullscreenToast(false), 3000);\n      return;\n    }\n\n    // Para outros navegadores: usar Fullscreen API\n    try {\n      if (!isFullscreen) {\n        const elem = document.documentElement;\n        if (elem.requestFullscreen) {\n          await elem.requestFullscreen();\n        } else if ((elem as any).webkitRequestFullscreen) {\n          await (elem as any).webkitRequestFullscreen();\n        } else if ((elem as any).mozRequestFullScreen) {\n          await (elem as any).mozRequestFullScreen();\n        } else if ((elem as any).msRequestFullscreen) {\n          await (elem as any).msRequestFullscreen();\n        }\n      } else {\n        if (document.exitFullscreen) {\n          await document.exitFullscreen();\n        } else if ((document as any).webkitExitFullscreen) {\n          await (document as any).webkitExitFullscreen();\n        } else if ((document as any).mozCancelFullScreen) {\n          await (document as any).mozCancelFullScreen();\n        } else if ((document as any).msExitFullscreen) {\n          await (document as any).msExitFullscreen();\n        }\n      }\n    } catch (error) {\n      console.error('Erro ao alternar modo tela cheia:', error);\n    }\n  };\n\n  // Não mostrar sidebar em rotas públicas (login, reset, criar conta, etc)\n  const isPublicPage = isPublicRoute(pathname);\n\n  // Rotas públicas não esperam autenticação\n  if (isPublicPage) {\n    return <>{children}</>;\n  }\n\n  // Mostrar loading enquanto verifica autenticação\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-[#F5F5F5]\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-[#1F53A2] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-[#757575]\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Usuário autenticado - mostrar sidebar\n  if (user) {\n    return (\n      <>\n        {/* Modal de Instruções iOS */}\n        {showIOSInstructions && (\n          <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center p-3\">\n            <div className=\"bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden animate-in zoom-in-95 max-h-[90vh] flex flex-col\">\n              {/* Header */}\n              <div className=\"bg-gradient-to-r from-[#1F53A2] to-[#2E67C3] px-4 py-3 flex items-center justify-between flex-shrink-0\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"p-1.5 bg-white/20 backdrop-blur-md rounded-lg\">\n                    <Maximize className=\"w-5 h-5 text-white\" />\n                  </div>\n                  <h3 className=\"text-lg font-bold text-white\">Modo Tela Cheia</h3>\n                </div>\n                <button\n                  onClick={() => setShowIOSInstructions(false)}\n                  className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors\"\n                >\n                  <X className=\"w-5 h-5 text-white\" />\n                </button>\n              </div>\n\n              {/* Content - Scrollable */}\n              <div className=\"p-4 overflow-y-auto flex-1\">\n                <p className=\"text-[#212121] mb-4 text-sm font-medium\">\n                  Para ter a experiência em tela cheia no Safari, adicione este app à sua tela inicial:\n                </p>\n\n                <div className=\"space-y-3 mb-4\">\n                  {/* Passo 1 */}\n                  <div className=\"flex gap-3 p-3 bg-gradient-to-br from-[#E3EFFF] to-[#F0F7FF] rounded-xl border border-[#1F53A2]/20\">\n                    <div className=\"flex-shrink-0 w-6 h-6 bg-gradient-to-br from-[#1F53A2] to-[#2E67C3] rounded-full flex items-center justify-center text-white text-sm font-bold\">\n                      1\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-bold text-[#212121] text-sm mb-1\">Toque no botão Compartilhar</p>\n                      <div className=\"flex items-center gap-1.5 text-xs text-[#757575]\">\n                        <Share className=\"w-3.5 h-3.5 flex-shrink-0\" />\n                        <span>Na barra inferior</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Passo 2 */}\n                  <div className=\"flex gap-3 p-3 bg-gradient-to-br from-[#E8F5E9] to-[#F1F8E9] rounded-xl border border-[#4CAF50]/20\">\n                    <div className=\"flex-shrink-0 w-6 h-6 bg-gradient-to-br from-[#4CAF50] to-[#2E7D32] rounded-full flex items-center justify-center text-white text-sm font-bold\">\n                      2\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-bold text-[#212121] text-sm mb-1\">Adicionar à Tela de Início</p>\n                      <p className=\"text-xs text-[#757575]\">Role o menu para encontrar</p>\n                    </div>\n                  </div>\n\n                  {/* Passo 3 */}\n                  <div className=\"flex gap-3 p-3 bg-gradient-to-br from-[#FFF3E0] to-[#FFE0B2] rounded-xl border border-[#FF9800]/20\">\n                    <div className=\"flex-shrink-0 w-6 h-6 bg-gradient-to-br from-[#FF9800] to-[#F57C00] rounded-full flex items-center justify-center text-white text-sm font-bold\">\n                      3\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-bold text-[#212121] text-sm mb-1\">Abra pelo ícone criado</p>\n                      <p className=\"text-xs text-[#757575]\">Tela cheia automática</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"p-3 bg-[#F8F9FA] rounded-xl border border-[#E0E0E0]\">\n                  <p className=\"text-xs text-[#757575] text-center leading-relaxed\">\n                    <strong className=\"text-[#1F53A2]\">Dica:</strong> Funcionará como app nativo sem barras do navegador.\n                  </p>\n                </div>\n              </div>\n\n              {/* Footer */}\n              <div className=\"p-4 flex-shrink-0 border-t border-[#E0E0E0]\">\n                <button\n                  onClick={() => setShowIOSInstructions(false)}\n                  className=\"w-full bg-gradient-to-r from-[#1F53A2] to-[#2E67C3] text-white py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\"\n                >\n                  Entendi\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Toast de Tela Cheia */}\n        {showFullscreenToast && (\n          <div className=\"fixed top-20 lg:top-6 right-6 z-[100] animate-in slide-in-from-top-5\">\n            <div className={`px-6 py-4 rounded-2xl shadow-2xl border-2 flex items-center gap-3 ${\n              isFullscreen || (isIOS && isStandalone)\n                ? 'bg-gradient-to-r from-[#4CAF50] to-[#2E7D32] border-[#4CAF50]/30 text-white'\n                : 'bg-gradient-to-r from-[#2196F3] to-[#1976D2] border-[#2196F3]/30 text-white'\n            }`}>\n              {(isFullscreen || (isIOS && isStandalone)) ? (\n                <>\n                  <Maximize className=\"w-5 h-5\" />\n                  <div>\n                    <p className=\"font-bold text-sm\">Modo Tela Cheia Ativo</p>\n                    <p className=\"text-xs opacity-90\">{isIOS ? 'App rodando em tela cheia' : 'Pressione ESC para sair'}</p>\n                  </div>\n                </>\n              ) : (\n                <>\n                  <Minimize className=\"w-5 h-5\" />\n                  <div>\n                    <p className=\"font-bold text-sm\">Modo Normal</p>\n                    <p className=\"text-xs opacity-90\">Tela cheia desativada</p>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        )}\n\n        {appToasts.length > 0 && (\n          <div className=\"fixed top-32 lg:top-20 right-6 z-[120] space-y-3\">\n            {appToasts.map((toast) => (\n              <button\n                key={toast.id}\n                type=\"button\"\n                onClick={() => {\n                  if (toast.href) {\n                    router.push(toast.href);\n                  }\n                  setAppToasts((prev) => prev.filter((item) => item.id !== toast.id));\n                }}\n                className=\"w-80 text-left bg-white border border-[#E0E0E0] rounded-2xl shadow-2xl px-4 py-3 hover:shadow-3xl transition-all\"\n              >\n                <div className=\"text-sm font-bold text-[#212121]\">{toast.title}</div>\n                {toast.body && <div className=\"text-xs text-[#757575] mt-1 line-clamp-2\">{toast.body}</div>}\n              </button>\n            ))}\n          </div>\n        )}\n\n        <Sidebar\n          mobileOpen={mobileMenuOpen}\n          onMobileClose={() => setMobileMenuOpen(false)}\n          isMobile={isMobile}\n        />\n\n        {/* Mobile Header com menu hamburguer - só aparece em telas < 1024px */}\n        {isMobile && (\n        <div className=\"fixed top-0 left-0 right-0 h-16 bg-gradient-to-r from-[#1F53A2] via-[#2E67C3] to-[#5C94CC] border-b-2 border-white/20 z-30 flex items-center justify-between px-4 shadow-xl\">\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={() => setMobileMenuOpen(true)}\n              className=\"p-2.5 hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-110 border-2 border-white/20\"\n              aria-label=\"Abrir menu\"\n            >\n              <Menu className=\"w-6 h-6 text-white\" />\n            </button>\n            <div className=\"flex items-center gap-3\">\n              <img src=\"/icons/GestaoInternaIcon.png\" alt=\"Logo\" className=\"w-12 h-12 rounded-lg shadow-2xl\" />\n              <h1 className=\"text-lg font-bold text-white tracking-tight\">MyInventory</h1>\n            </div>\n          </div>\n\n          {/* Botão Tela Cheia Mobile */}\n          <button\n            onClick={toggleFullscreen}\n            className={`p-2.5 hover:bg-white/20 rounded-xl transition-all duration-300 hover:scale-110 border-2 ${\n              isIOS && isStandalone ? 'border-[#4CAF50] bg-[#4CAF50]/20' : 'border-white/20'\n            }`}\n            aria-label={\n              isIOS && isStandalone\n                ? 'App em modo tela cheia'\n                : isFullscreen\n                ? 'Sair do modo tela cheia'\n                : 'Modo tela cheia'\n            }\n            title={\n              isIOS && isStandalone\n                ? 'App em modo tela cheia'\n                : isFullscreen\n                ? 'Sair do modo tela cheia'\n                : 'Modo tela cheia'\n            }\n          >\n            {isIOS && isStandalone ? (\n              <Maximize className=\"w-5 h-5 text-white\" />\n            ) : isFullscreen ? (\n              <Minimize className=\"w-5 h-5 text-white\" />\n            ) : (\n              <Maximize className=\"w-5 h-5 text-white\" />\n            )}\n          </button>\n        </div>\n        )}\n\n        {/* Main content com padding responsivo */}\n        <main style={{ paddingLeft: isMobile ? '0' : '288px', paddingTop: isMobile ? '64px' : '0' }} className=\"min-h-screen\">\n          <RoleGuard>{children}</RoleGuard>\n        </main>\n      </>\n    );\n  }\n\n  // Não autenticado e não em rota pública - mostra loading\n  // (AuthContext vai redirecionar para /login)\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-[#F5F5F5]\">\n      <div className=\"text-center\">\n        <div className=\"w-16 h-16 border-4 border-[#1F53A2] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n        <p className=\"text-[#757575]\">Redirecionando...</p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAiOyB;AApOzB;AADA;AAAA;AAAA;AAAA;AAAA;;;AANA;;;;;;;;;;AAmBO,SAAS,cAAc,EAAE,QAAQ,EAAiC;;IACvE,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,2HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/D,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/D,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IACzD,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAiB;IACxC,MAAM,iBAAiB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAMlB;IAEV,kCAAkC;IAClC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,cAAc;YAClB,YAAY,OAAO,UAAU,GAAG;QAClC;QACA;QACA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,iCAAiC;IACjC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,KAAK,OAAO,SAAS,CAAC,SAAS;QACrC,MAAM,MAAM,mBAAmB,IAAI,CAAC,OAAQ,UAAU,QAAQ,KAAK,cAAc,UAAU,cAAc,GAAG;QAC5G,MAAM,aAAa,AAAC,OAAO,SAAS,CAAS,UAAU,KAAK,QAAQ,OAAO,UAAU,CAAC,8BAA8B,OAAO;QAE3H,SAAS;QACT,gBAAgB;IAClB,GAAG,EAAE;IAEL,4CAA4C;IAC5C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,yBAAyB;YAC7B,MAAM,qBAAqB,CAAC,CAAC,CAC3B,SAAS,iBAAiB,IAC1B,AAAC,SAAiB,uBAAuB,IACzC,AAAC,SAAiB,oBAAoB,IACtC,AAAC,SAAiB,mBAAmB,AACvC;YAEA,gBAAgB;YAEhB,sBAAsB;YACtB,IAAI,CAAC,SAAS,CAAC,cAAc;gBAC3B,uBAAuB;gBACvB,MAAM,QAAQ,WAAW,IAAM,uBAAuB,QAAQ;gBAC9D,OAAO,IAAM,aAAa;YAC5B;QACF;QAEA,SAAS,gBAAgB,CAAC,oBAAoB;QAC9C,SAAS,gBAAgB,CAAC,0BAA0B;QACpD,SAAS,gBAAgB,CAAC,uBAAuB;QACjD,SAAS,gBAAgB,CAAC,sBAAsB;QAEhD,OAAO;YACL,SAAS,mBAAmB,CAAC,oBAAoB;YACjD,SAAS,mBAAmB,CAAC,0BAA0B;YACvD,SAAS,mBAAmB,CAAC,uBAAuB;YACpD,SAAS,mBAAmB,CAAC,sBAAsB;QACrD;IACF,GAAG;QAAC;QAAO;KAAa;IAExB,wBAAwB;IACxB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB,CAAC;YACrB,IAAI,EAAE,GAAG,KAAK,OAAO;gBACnB,EAAE,cAAc;gBAChB;YACF;QACF;QAEA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;KAAa;IAEjB,MAAM,WAAW,CAAC;QAChB,MAAM,KAAK,MAAM,EAAE,IAAI,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,IAAI;QAC7E,aAAa,CAAC,OAAS;mBAAI;gBAAM;oBAAE,GAAG,KAAK;oBAAE;gBAAG;aAAE;QAClD,OAAO,UAAU,CAAC;YAChB,aAAa,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;QAC3D,GAAG;IACL;IAEA,MAAM,uBAAuB;QAC3B,IAAI;YACF,OAAO,aAAa,OAAO,CAAC,0BAA0B;QACxD,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA,MAAM,gBAAgB,OAAO,OAAe,MAAc;QACxD,IAAI,CAAC,wBAAwB;QAC7B,IAAI,CAAC,CAAC,kBAAkB,MAAM,GAAG;QACjC,IAAI,aAAa,aAAa,UAAU;QACxC,IAAI,eAAe,WAAW;YAC5B,IAAI;gBACF,aAAa,MAAM,aAAa,iBAAiB;YACnD,EAAE,OAAM;gBACN,aAAa;YACf;QACF;QACA,IAAI,eAAe,WAAW;QAC9B,MAAM,QAAQ,IAAI,aAAa,OAAO;YAAE;QAAK;QAC7C,MAAM,OAAO,GAAG;YACd,OAAO,KAAK;YACZ,IAAI,MAAM;gBACR,OAAO,IAAI,CAAC;YACd;YACA,MAAM,KAAK;QACb;IACF;IAEA,MAAM,2BAA2B,OAAO;QAQtC,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,4HAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,UAAU;YAC/C,MAAM,QAAQ,KAAK,OAAO,EAAE;YAC5B,IAAI,CAAC,OAAO;YACZ,MAAM,MAAM,0BAA0B;gBACpC,QAAQ;gBACR,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;oBAChC,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6CAA6C;QAC7D;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,eAAe,OAAO,EAAE,SAAS;YACnC,OAAO,YAAY,CAAC,eAAe,OAAO,CAAC,OAAO;QACpD;QACA,eAAe,OAAO,GAAG;IAC3B;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU,WAAW,eAAe;YACtC;QACF;IACF,GAAG;QAAC;KAAS;IAEb,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,MAAM,KAAK;QAChB,MAAM,UAAU,4HAAA,CAAA,WAAQ,CACrB,OAAO,CAAC,CAAC,gBAAgB,EAAE,KAAK,GAAG,EAAE,EACrC,EAAE,CACD,oBACA;YACE,OAAO;YACP,QAAQ;YACR,OAAO;YACP,QAAQ,CAAC,eAAe,EAAE,KAAK,GAAG,EAAE;QACtC,GACA,CAAC;YACC,MAAM,SAAS,QAAQ,GAAG;YAC1B,IAAI,CAAC,QAAQ;YACb,IAAI,UAAU,WAAW,eAAe;YAExC,IAAI,cAAqB,EAAE;YAC3B,IAAI,MAAM,OAAO,CAAC,OAAO,WAAW,GAAG;gBACrC,cAAc,OAAO,WAAW;YAClC,OAAO,IAAI,OAAO,OAAO,WAAW,KAAK,UAAU;gBACjD,IAAI;oBACF,MAAM,SAAS,KAAK,KAAK,CAAC,OAAO,WAAW;oBAC5C,IAAI,MAAM,OAAO,CAAC,SAAS,cAAc;gBAC3C,EAAE,OAAM;oBACN,cAAc,EAAE;gBAClB;YACF;YAEA,MAAM,UAAU,YAAY,IAAI,CAAC,CAAC,OAAS,MAAM,SAAS;YAC1D,MAAM,OACJ,AAAC,OAAO,IAAI,IAAI,OAAO,OAAO,IAAI,EAAE,IAAI,MACxC,CAAC,YAAY,MAAM,GAAG,IAAK,UAAU,sBAAsB,sBAAuB,eAAe;YACnG,MAAM,aAAa,OAAO,WAAW,IAAI;YACzC,MAAM,OAAO,OAAO,eAAe,GAAG,CAAC,WAAW,EAAE,OAAO,eAAe,EAAE,GAAG;YAE/E,SAAS;gBACP,OAAO;gBACP;gBACA;YACF;YACA,KAAK,cAAc,YAAY,MAAM;QACvC,GAED,SAAS;QAEZ,OAAO;YACL,4HAAA,CAAA,WAAQ,CAAC,aAAa,CAAC;QACzB;IACF,GAAG;QAAC;QAAU;QAAQ,MAAM;KAAI;IAEhC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,MAAM,KAAK;QAChB,MAAM,eAAe,iEAAgD;QACrE,MAAM,gBAAgB,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,iCAAiC,IAAI;QACvE,MAAM,SAAS,CAAA,GAAA,kLAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAC9B,MAAM;YACN,YAAY;gBAAC;aAAY;YACzB,cAAc;QAChB;QACA,UAAU,OAAO,GAAG;QAEpB,OAAO,EAAE,CAAC,WAAW;YACnB,OAAO,IAAI,CAAC,YAAY;gBAAE,QAAQ,KAAK,GAAG;gBAAE,gBAAgB;YAAS;QACvE;QAEA,OAAO,EAAE,CAAC,iBAAiB,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE;YAC9C,IAAI,UAAU,WAAW,eAAe;YACxC,MAAM,aAAa,QAAQ,SAAS,CAAC,WAAW,EAAE,OAAO,MAAM,EAAE,GAAG;YACpE,MAAM,YAAY,aAAa,UAAU,qBAAqB;YAC9D,MAAM,OAAO,QAAQ,iBAAiB,CAAC,WAAW,EAAE,OAAO,cAAc,EAAE,GAAG;YAE9E,SAAS;gBACP,OAAO;gBACP,MAAM;gBACN;YACF;YACA,KAAK,cAAc,YAAY,WAAW;YAC1C,KAAK,yBAAyB;gBAC5B,YAAY,KAAK,GAAG;gBACpB,UAAU,QAAQ;gBAClB,gBAAgB,QAAQ;gBACxB;gBACA,QAAQ;YACV;YAEA;YACA,MAAM,UAAU,OAAO,UAAU,CAAC;gBAChC,IAAI,CAAC,eAAe,OAAO,EAAE;gBAC7B,KAAK,yBAAyB;oBAC5B,YAAY,KAAK,GAAG;oBACpB,UAAU,eAAe,OAAO,CAAC,QAAQ;oBACzC,YAAY,eAAe,OAAO,CAAC,UAAU;oBAC7C,gBAAgB,eAAe,OAAO,CAAC,cAAc;oBACrD,UAAU,eAAe,OAAO,CAAC,QAAQ;oBACzC,QAAQ;gBACV;gBACA;YACF,GAAG;YAEH,eAAe,OAAO,GAAG;gBACvB;gBACA,UAAU,QAAQ;gBAClB,YAAY,QAAQ,eAAe,QAAQ;gBAC3C,gBAAgB,QAAQ;gBACxB;YACF;QACF;QAEA,OAAO,EAAE,CAAC,cAAc;YACtB,IAAI,CAAC,eAAe,OAAO,EAAE;YAC7B,KAAK,yBAAyB;gBAC5B,YAAY,KAAK,GAAG;gBACpB,UAAU,eAAe,OAAO,CAAC,QAAQ;gBACzC,YAAY,eAAe,OAAO,CAAC,UAAU;gBAC7C,gBAAgB,eAAe,OAAO,CAAC,cAAc;gBACrD,UAAU,eAAe,OAAO,CAAC,QAAQ;gBACzC,QAAQ;YACV;YACA;QACF;QAEA,OAAO;YACL,OAAO,UAAU;YACjB,UAAU,OAAO,GAAG;YACpB;QACF;IACF,GAAG;QAAC;QAAU;QAAQ,MAAM;KAAI;IAEhC,gCAAgC;IAChC,MAAM,mBAAmB;QACvB,6DAA6D;QAC7D,IAAI,SAAS,CAAC,cAAc;YAC1B,uBAAuB;YACvB;QACF;QAEA,yEAAyE;QACzE,IAAI,SAAS,cAAc;YACzB,uBAAuB;YACvB,WAAW,IAAM,uBAAuB,QAAQ;YAChD;QACF;QAEA,+CAA+C;QAC/C,IAAI;YACF,IAAI,CAAC,cAAc;gBACjB,MAAM,OAAO,SAAS,eAAe;gBACrC,IAAI,KAAK,iBAAiB,EAAE;oBAC1B,MAAM,KAAK,iBAAiB;gBAC9B,OAAO,IAAI,AAAC,KAAa,uBAAuB,EAAE;oBAChD,MAAM,AAAC,KAAa,uBAAuB;gBAC7C,OAAO,IAAI,AAAC,KAAa,oBAAoB,EAAE;oBAC7C,MAAM,AAAC,KAAa,oBAAoB;gBAC1C,OAAO,IAAI,AAAC,KAAa,mBAAmB,EAAE;oBAC5C,MAAM,AAAC,KAAa,mBAAmB;gBACzC;YACF,OAAO;gBACL,IAAI,SAAS,cAAc,EAAE;oBAC3B,MAAM,SAAS,cAAc;gBAC/B,OAAO,IAAI,AAAC,SAAiB,oBAAoB,EAAE;oBACjD,MAAM,AAAC,SAAiB,oBAAoB;gBAC9C,OAAO,IAAI,AAAC,SAAiB,mBAAmB,EAAE;oBAChD,MAAM,AAAC,SAAiB,mBAAmB;gBAC7C,OAAO,IAAI,AAAC,SAAiB,gBAAgB,EAAE;oBAC7C,MAAM,AAAC,SAAiB,gBAAgB;gBAC1C;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qCAAqC;QACrD;IACF;IAEA,yEAAyE;IACzE,MAAM,eAAe,CAAA,GAAA,uHAAA,CAAA,gBAAa,AAAD,EAAE;IAEnC,0CAA0C;IAC1C,IAAI,cAAc;QAChB,qBAAO;sBAAG;;IACZ;IAEA,iDAAiD;IACjD,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;;;;;;IAItC;IAEA,wCAAwC;IACxC,IAAI,MAAM;QACR,qBACE;;gBAEG,qCACC,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC,6MAAA,CAAA,WAAQ;oDAAC,WAAU;;;;;;;;;;;0DAEtB,6LAAC;gDAAG,WAAU;0DAA+B;;;;;;;;;;;;kDAE/C,6LAAC;wCACC,SAAS,IAAM,uBAAuB;wCACtC,WAAU;kDAEV,cAAA,6LAAC,+LAAA,CAAA,IAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAKjB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAA0C;;;;;;kDAIvD,6LAAC;wCAAI,WAAU;;0DAEb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;kEAAiJ;;;;;;kEAGhK,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAwC;;;;;;0EACrD,6LAAC;gEAAI,WAAU;;kFACb,6LAAC,uMAAA,CAAA,QAAK;wEAAC,WAAU;;;;;;kFACjB,6LAAC;kFAAK;;;;;;;;;;;;;;;;;;;;;;;;0DAMZ,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;kEAAiJ;;;;;;kEAGhK,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAwC;;;;;;0EACrD,6LAAC;gEAAE,WAAU;0EAAyB;;;;;;;;;;;;;;;;;;0DAK1C,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;kEAAiJ;;;;;;kEAGhK,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAwC;;;;;;0EACrD,6LAAC;gEAAE,WAAU;0EAAyB;;;;;;;;;;;;;;;;;;;;;;;;kDAK5C,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAE,WAAU;;8DACX,6LAAC;oDAAO,WAAU;8DAAiB;;;;;;gDAAc;;;;;;;;;;;;;;;;;;0CAMvD,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCACC,SAAS,IAAM,uBAAuB;oCACtC,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;gBASR,qCACC,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAW,CAAC,kEAAkE,EACjF,gBAAiB,SAAS,eACtB,gFACA,+EACJ;kCACC,AAAC,gBAAiB,SAAS,6BAC1B;;8CACE,6LAAC,6MAAA,CAAA,WAAQ;oCAAC,WAAU;;;;;;8CACpB,6LAAC;;sDACC,6LAAC;4CAAE,WAAU;sDAAoB;;;;;;sDACjC,6LAAC;4CAAE,WAAU;sDAAsB,QAAQ,8BAA8B;;;;;;;;;;;;;yDAI7E;;8CACE,6LAAC,6MAAA,CAAA,WAAQ;oCAAC,WAAU;;;;;;8CACpB,6LAAC;;sDACC,6LAAC;4CAAE,WAAU;sDAAoB;;;;;;sDACjC,6LAAC;4CAAE,WAAU;sDAAqB;;;;;;;;;;;;;;;;;;;;;;;;gBAQ7C,UAAU,MAAM,GAAG,mBAClB,6LAAC;oBAAI,WAAU;8BACZ,UAAU,GAAG,CAAC,CAAC,sBACd,6LAAC;4BAEC,MAAK;4BACL,SAAS;gCACP,IAAI,MAAM,IAAI,EAAE;oCACd,OAAO,IAAI,CAAC,MAAM,IAAI;gCACxB;gCACA,aAAa,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,MAAM,EAAE;4BACnE;4BACA,WAAU;;8CAEV,6LAAC;oCAAI,WAAU;8CAAoC,MAAM,KAAK;;;;;;gCAC7D,MAAM,IAAI,kBAAI,6LAAC;oCAAI,WAAU;8CAA4C,MAAM,IAAI;;;;;;;2BAX/E,MAAM,EAAE;;;;;;;;;;8BAiBrB,6LAAC,yHAAA,CAAA,UAAO;oBACN,YAAY;oBACZ,eAAe,IAAM,kBAAkB;oBACvC,UAAU;;;;;;gBAIX,0BACD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS,IAAM,kBAAkB;oCACjC,WAAU;oCACV,cAAW;8CAEX,cAAA,6LAAC,qMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;;;;;;8CAElB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,KAAI;4CAA+B,KAAI;4CAAO,WAAU;;;;;;sDAC7D,6LAAC;4CAAG,WAAU;sDAA8C;;;;;;;;;;;;;;;;;;sCAKhE,6LAAC;4BACC,SAAS;4BACT,WAAW,CAAC,wFAAwF,EAClG,SAAS,eAAe,qCAAqC,mBAC7D;4BACF,cACE,SAAS,eACL,2BACA,eACA,4BACA;4BAEN,OACE,SAAS,eACL,2BACA,eACA,4BACA;sCAGL,SAAS,6BACR,6LAAC,6MAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;uCAClB,6BACF,6LAAC,6MAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;qDAEpB,6LAAC,6MAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAO1B,6LAAC;oBAAK,OAAO;wBAAE,aAAa,WAAW,MAAM;wBAAS,YAAY,WAAW,SAAS;oBAAI;oBAAG,WAAU;8BACrG,cAAA,6LAAC,2HAAA,CAAA,YAAS;kCAAE;;;;;;;;;;;;;IAIpB;IAEA,yDAAyD;IACzD,6CAA6C;IAC7C,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBAAE,WAAU;8BAAiB;;;;;;;;;;;;;;;;;AAItC;GAvjBgB;;QACG,qIAAA,CAAA,cAAW;QACb,qIAAA,CAAA,YAAS;QACE,2HAAA,CAAA,UAAO;;;KAHnB"}},
    {"offset": {"line": 2426, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}