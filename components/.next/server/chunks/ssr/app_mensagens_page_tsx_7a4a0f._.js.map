{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/app/mensagens/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n  MessageSquare,\n  User,\n  RefreshCw,\n  Clock,\n  Search,\n  ChevronRight,\n  Plus,\n  Mail,\n  MailOpen,\n  UserPlus,\n  Filter,\n  X,\n  Circle,\n  Send,\n  Users,\n  Inbox,\n  MessageCircle,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { supabase } from '@/lib/supabase-client';\n\ninterface Conversation {\n  id: string;\n  participants: string[];\n  participantNames: Record<string, string>;\n  lastMessage?: string;\n  lastMessageAt?: string;\n  lastMessageBy?: string;\n  unreadCount: Record<string, number>;\n  createdAt: string;\n  onlineStatus?: Record<string, boolean>;\n}\n\nexport default function MensagensPage() {\n  const router = useRouter();\n  const { user, firebaseUser } = useAuth();\n  const [data, setData] = useState<Conversation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [query, setQuery] = useState('');\n\n  // Nova conversa - estado\n  const [newOpen, setNewOpen] = useState(false);\n  const [users, setUsers] = useState<Array<{ id: string; displayName: string; email: string; active: boolean; isOnline?: boolean; lastSeen?: string }>>([]);\n  const [usersLoading, setUsersLoading] = useState(false);\n  const [userSearch, setUserSearch] = useState('');\n  const [selectedUserId, setSelectedUserId] = useState('');\n  const [firstMessage, setFirstMessage] = useState('');\n  const [creating, setCreating] = useState(false);\n\n  const currentUserId = user?.uid || '';\n  const currentUserName = user?.displayName || 'Usu√°rio';\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const url = currentUserId\n        ? `/api/mensagens?userId=${encodeURIComponent(currentUserId)}`\n        : '/api/mensagens';\n      const res = await fetch(url, {\n        cache: 'no-store',\n        headers: {\n          'Cache-Control': 'no-cache',\n        },\n      });\n      if (!res.ok) throw new Error('Falha ao carregar conversas');\n      const json = await res.json();\n\n      // Debug: Verificar onlineStatus\n      console.log('üîç DEBUG - Conversas recebidas:', json.conversations);\n      json.conversations?.forEach((conv: any) => {\n        console.log(`üìã Conversa ${conv.id}:`, {\n          participants: conv.participants,\n          onlineStatus: conv.onlineStatus,\n          currentUserId: currentUserId\n        });\n      });\n\n      setData(json.conversations || []);\n      setError(null);\n    } catch (e: any) {\n      console.error(e);\n      setError(e?.message || 'Erro desconhecido');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!user || !currentUserId) return;\n\n    // Carregar dados iniciais\n    fetchData();\n\n    // Configurar listener em tempo real para conversas (Supabase)\n    console.log('üî• Configurando listener Supabase para conversas do userId:', currentUserId);\n\n    const channel = supabase\n      .channel('conversations-list')\n      .on(\n        'postgres_changes',\n        {\n          event: '*', // Escutar INSERT e UPDATE\n          schema: 'public',\n          table: 'conversations',\n          filter: `participants=cs.{${currentUserId}}`, // cs = contains (array contains)\n        },\n        (payload) => {\n          console.log('üî• Supabase Realtime: Conversa atualizada!', payload);\n          fetchData(); // Recarrega a lista completa para garantir consist√™ncia\n        }\n      )\n      .subscribe();\n\n    // Polling de seguran√ßa a cada 30s\n    const pollingInterval = setInterval(fetchData, 30000);\n\n    return () => {\n      console.log('üî• Removendo listener Supabase');\n      supabase.removeChannel(channel);\n      clearInterval(pollingInterval);\n    };\n  }, [user?.uid, currentUserId]);\n\n  // Abrir modal e carregar usu√°rios\n  const openNew = async () => {\n    setNewOpen(true);\n    setSelectedUserId('');\n    setFirstMessage('');\n    setUsersLoading(true);\n    try {\n      // Obter token de autentica√ß√£o\n      const token = firebaseUser?.getIdToken ? await firebaseUser.getIdToken() : null;\n\n      // Usar endpoint espec√≠fico para mensagens (n√£o requer admin)\n      const res = await fetch('/api/mensagens/users', {\n        cache: 'no-store',\n        headers: token ? { Authorization: `Bearer ${token}` } : {},\n      });\n      const json = await res.json();\n      const list = (json.users || []) as Array<{ id: string; displayName: string; email: string; active: boolean; isOnline?: boolean; lastSeen?: string }>;\n      setUsers(list);\n    } catch (e) {\n      console.error('Erro ao listar usu√°rios:', e);\n      setUsers([]);\n    } finally {\n      setUsersLoading(false);\n    }\n  };\n\n  const closeNew = () => setNewOpen(false);\n\n  const filteredUsers = useMemo(() => {\n    const q = userSearch.trim().toLowerCase();\n    let filtered = users;\n    if (q) {\n      filtered = users.filter(u => (u.displayName || '').toLowerCase().includes(q) || (u.email || '').toLowerCase().includes(q));\n    }\n    // Ordenar: online primeiro, depois por nome\n    return filtered.sort((a, b) => {\n      if (a.isOnline && !b.isOnline) return -1;\n      if (!a.isOnline && b.isOnline) return 1;\n      return (a.displayName || '').localeCompare(b.displayName || '');\n    });\n  }, [users, userSearch]);\n\n  const createConversation = async () => {\n    if (!selectedUserId || !firstMessage.trim() || !currentUserId) return;\n    setCreating(true);\n    try {\n      const res = await fetch('/api/mensagens', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          senderId: currentUserId,\n          senderName: currentUserName,\n          receiverId: selectedUserId,\n          text: firstMessage.trim(),\n        }),\n      });\n      const json = await res.json();\n      if (!res.ok) throw new Error(json?.error || 'Falha ao criar conversa');\n      const conversationId = json?.conversationId as string | undefined;\n      setNewOpen(false);\n      if (conversationId) {\n        router.push(`/mensagens/${conversationId}`);\n      } else {\n        fetchData();\n      }\n    } catch (e) {\n      console.error('Erro ao criar conversa:', e);\n      alert('N√£o foi poss√≠vel criar a conversa');\n    } finally {\n      setCreating(false);\n    }\n  };\n\n  const formatTime = (dateString?: string): string => {\n    if (!dateString) return '';\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const minutes = Math.floor(diff / 60000);\n    const hours = Math.floor(diff / 3600000);\n    const days = Math.floor(diff / 86400000);\n\n    if (minutes < 1) return 'Agora';\n    if (minutes < 60) return `${minutes}m`;\n    if (hours < 24) return `${hours}h`;\n    if (days === 1) return 'Ontem';\n    if (days < 7) return `${days}d`;\n\n    return date.toLocaleDateString('pt-BR', {\n      day: '2-digit',\n      month: '2-digit',\n    });\n  };\n\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    return data.filter((conv) => {\n      if (!q) return true;\n      const otherUserId = conv.participants.find(p => p !== currentUserId);\n      const otherUserName = otherUserId ? conv.participantNames[otherUserId] : '';\n      const lastMsg = (conv.lastMessage || '').toLowerCase();\n      return otherUserName.toLowerCase().includes(q) || lastMsg.includes(q);\n    });\n  }, [data, query, currentUserId]);\n\n  const stats = useMemo(() => {\n    const total = data.length;\n    const unreadTotal = data.reduce((sum, conv) => sum + (conv.unreadCount[currentUserId] || 0), 0);\n    const unreadConversations = data.filter(conv => (conv.unreadCount[currentUserId] || 0) > 0).length;\n\n    // Debug: verificar status online de cada conversa\n    console.log('üìä Calculando stats - In√≠cio');\n    console.log('üìä Total conversas:', total);\n    console.log('üìä Current User ID:', currentUserId);\n    console.log('üìä Todas as conversas:', data);\n\n    const onlineUsers = data.filter(conv => {\n      const otherUserId = conv.participants.find(p => p !== currentUserId);\n      const hasStatus = !!conv.onlineStatus;\n      const statusValue = otherUserId ? conv.onlineStatus?.[otherUserId] : undefined;\n      const isOnline = !!(otherUserId && conv.onlineStatus && conv.onlineStatus[otherUserId]);\n\n      console.log(`üîç Conversa ${conv.id}:`, {\n        participants: conv.participants,\n        currentUserId,\n        otherUserId,\n        hasOnlineStatus: hasStatus,\n        allOnlineStatuses: conv.onlineStatus,\n        onlineStatusForOtherUser: statusValue,\n        isOnline,\n        result: isOnline ? '‚úÖ ONLINE' : '‚ùå OFFLINE'\n      });\n\n      return isOnline;\n    }).length;\n\n    console.log('üìä Stats finais:', {\n      total,\n      unreadTotal,\n      unreadConversations,\n      onlineUsers,\n      percentOnline: total > 0 ? `${Math.round((onlineUsers/total)*100)}%` : '0%'\n    });\n\n    return { total, unreadTotal, unreadConversations, onlineUsers };\n  }, [data, currentUserId]);\n\n  return (\n    <div className=\"min-h-screen bg-[#F8F9FA]\">\n      {/* Hero Header */}\n      <div className=\"relative bg-gradient-to-br from-[#132440] via-[#16476A] to-[#3B9797] overflow-hidden\">\n        <div className=\"absolute inset-0 opacity-10\">\n          <div className=\"absolute inset-0\" style={{\n            backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`\n          }}></div>\n        </div>\n\n        <div className=\"relative max-w-[1400px] mx-auto px-4 sm:px-8 lg:px-10 py-8\">\n          <div className=\"flex flex-col gap-6\">\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-6\">\n              <div className=\"flex items-center gap-5\">\n                <div className=\"p-4 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 shadow-xl relative\">\n                  <MessageSquare className=\"w-10 h-10 text-white\" />\n                  {stats.unreadTotal > 0 && (\n                    <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-[#BF092F] rounded-full flex items-center justify-center\">\n                      <span className=\"text-white text-xs font-bold\">{stats.unreadTotal > 9 ? '9+' : stats.unreadTotal}</span>\n                    </div>\n                  )}\n                </div>\n                <div>\n                  <h1 className=\"text-4xl md:text-5xl font-bold text-white tracking-tight drop-shadow-lg\">\n                    Central de Mensagens\n                  </h1>\n                  <p className=\"text-gray-200 text-base font-medium mt-2\">\n                    Converse em tempo real com sua equipe\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <button\n                  onClick={openNew}\n                  disabled={!currentUserId}\n                  className=\"inline-flex items-center gap-2 bg-white text-[#16476A] px-5 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 disabled:opacity-50\"\n                >\n                  <UserPlus className=\"w-5 h-5\" />\n                  Nova Conversa\n                </button>\n                <button\n                  onClick={fetchData}\n                  disabled={loading}\n                  className=\"inline-flex items-center gap-2 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-5 py-3 rounded-xl font-bold shadow-lg border border-white/30 disabled:opacity-50 transition-all duration-300 hover:scale-105\"\n                >\n                  <RefreshCw className={`w-5 h-5 ${loading ? 'animate-spin' : ''}`} />\n                  Atualizar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <main className=\"max-w-[1400px] mx-auto px-4 sm:px-8 lg:px-10 py-8 -mt-6\">\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n          <div className=\"bg-white rounded-2xl shadow-xl border border-[#E0E0E0] overflow-hidden hover:shadow-2xl transition-all duration-300\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"p-3 bg-gradient-to-br from-blue-100 to-blue-50 rounded-xl\">\n                  <MessageCircle className=\"w-6 h-6 text-[#16476A]\" />\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-sm font-bold text-[#757575] uppercase\">Conversas</p>\n                  <p className=\"text-3xl font-bold text-[#16476A]\">{stats.total}</p>\n                </div>\n              </div>\n              <div className=\"h-2 bg-[#F5F5F5] rounded-full overflow-hidden\">\n                <div className=\"h-full bg-gradient-to-r from-[#16476A] to-[#132440]\" style={{ width: '100%' }} />\n              </div>\n              <p className=\"text-xs text-[#757575] mt-2\">Total de conversas</p>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-2xl shadow-xl border border-[#E0E0E0] overflow-hidden hover:shadow-2xl transition-all duration-300\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"p-3 bg-gradient-to-br from-red-100 to-red-50 rounded-xl\">\n                  <Mail className=\"w-6 h-6 text-[#BF092F]\" />\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-sm font-bold text-[#757575] uppercase\">N√£o Lidas</p>\n                  <p className=\"text-3xl font-bold text-[#BF092F]\">{stats.unreadTotal}</p>\n                </div>\n              </div>\n              <div className=\"h-2 bg-[#F5F5F5] rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full bg-gradient-to-r from-[#BF092F] to-[#a50728]\"\n                  style={{ width: stats.total > 0 ? `${(stats.unreadConversations / stats.total) * 100}%` : '0%' }}\n                />\n              </div>\n              <p className=\"text-xs text-[#757575] mt-2\">\n                {stats.unreadConversations} {stats.unreadConversations === 1 ? 'conversa' : 'conversas'} pendentes\n              </p>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-2xl shadow-xl border border-[#E0E0E0] overflow-hidden hover:shadow-2xl transition-all duration-300\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"p-3 bg-gradient-to-br from-green-100 to-green-50 rounded-xl\">\n                  <MailOpen className=\"w-6 h-6 text-[#3B9797]\" />\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-sm font-bold text-[#757575] uppercase\">Lidas</p>\n                  <p className=\"text-3xl font-bold text-[#3B9797]\">{stats.total - stats.unreadConversations}</p>\n                </div>\n              </div>\n              <div className=\"h-2 bg-[#F5F5F5] rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full bg-gradient-to-r from-[#3B9797] to-[#2c7a7a]\"\n                  style={{ width: stats.total > 0 ? `${((stats.total - stats.unreadConversations) / stats.total) * 100}%` : '0%' }}\n                />\n              </div>\n              <p className=\"text-xs text-[#757575] mt-2\">\n                {stats.total > 0 ? `${Math.round(((stats.total - stats.unreadConversations) / stats.total) * 100)}%` : '0%'} visualizadas\n              </p>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-2xl shadow-xl border border-[#E0E0E0] overflow-hidden hover:shadow-2xl transition-all duration-300\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"p-3 bg-gradient-to-br from-green-100 to-green-50 rounded-xl\">\n                  <Users className=\"w-6 h-6 text-[#3B9797]\" />\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-sm font-bold text-[#757575] uppercase\">Online</p>\n                  <p className=\"text-3xl font-bold text-[#3B9797]\">{stats.onlineUsers}</p>\n                </div>\n              </div>\n              <div className=\"h-2 bg-[#F5F5F5] rounded-full overflow-hidden\">\n                <div\n                  className=\"h-full bg-gradient-to-r from-[#3B9797] to-[#2c7a7a]\"\n                  style={{ width: stats.total > 0 ? `${(stats.onlineUsers / stats.total) * 100}%` : '0%' }}\n                />\n              </div>\n              <p className=\"text-xs text-[#757575] mt-2\">Usu√°rios ativos agora</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Modal Nova Conversa */}\n        {newOpen && (\n          <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border border-[#E0E0E0]\">\n              <div className=\"bg-gradient-to-r from-[#16476A] to-[#132440] px-6 py-5 flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"p-2 bg-white/20 rounded-lg\">\n                    <UserPlus className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-white\">Nova Conversa</h3>\n                    {!usersLoading && users.length > 0 && (\n                      <p className=\"text-sm text-white/70\">\n                        {users.filter(u => u.isOnline).length} online de {users.length} usu√°rios\n                      </p>\n                    )}\n                  </div>\n                </div>\n                <button\n                  onClick={closeNew}\n                  className=\"p-2 rounded-lg hover:bg-white/20 transition-all text-white\"\n                  aria-label=\"Fechar\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              <div className=\"p-6\">\n                <div className=\"mb-5\">\n                  <label className=\"block text-sm font-bold text-[#757575] mb-2\">Buscar usu√°rio</label>\n                  <div className=\"relative\">\n                    <Search className=\"w-5 h-5 text-[#757575] absolute left-3 top-1/2 -translate-y-1/2\" />\n                    <input\n                      value={userSearch}\n                      onChange={(e) => setUserSearch(e.target.value)}\n                      placeholder=\"Nome ou e-mail...\"\n                      className=\"w-full pl-11 pr-4 py-3 border-2 border-[#E0E0E0] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#16476A]/30 focus:border-[#16476A] transition-all font-medium\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"max-h-72 overflow-y-auto border-2 border-[#E0E0E0] rounded-xl mb-5 divide-y divide-[#E0E0E0]\">\n                  {usersLoading ? (\n                    <div className=\"p-8 text-center text-[#757575]\">\n                      <RefreshCw className=\"w-6 h-6 animate-spin inline mb-2 text-[#16476A]\" />\n                      <p className=\"font-medium\">Carregando usu√°rios...</p>\n                    </div>\n                  ) : filteredUsers.length === 0 ? (\n                    <div className=\"p-8 text-center text-[#757575]\">\n                      <User className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                      <p className=\"font-medium\">Nenhum usu√°rio encontrado</p>\n                    </div>\n                  ) : (\n                    filteredUsers.map(u => (\n                      <label\n                        key={u.id}\n                        className={`flex items-center gap-3 p-4 cursor-pointer transition-all duration-300 ${\n                          selectedUserId === u.id\n                            ? 'bg-blue-100 border-l-4 border-l-[#16476A]'\n                            : 'hover:bg-[#F8F9FA]'\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"receiver\"\n                          value={u.id}\n                          checked={selectedUserId === u.id}\n                          onChange={() => setSelectedUserId(u.id)}\n                          className=\"w-5 h-5 text-[#16476A] focus:ring-[#16476A]\"\n                        />\n                        <div className=\"relative\">\n                          <div className={`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow-md ${\n                            u.isOnline\n                              ? 'bg-gradient-to-br from-[#3B9797] to-[#2c7a7a]'\n                              : 'bg-gradient-to-br from-[#16476A] to-[#132440]'\n                          }`}>\n                            {u.displayName.substring(0, 2).toUpperCase()}\n                          </div>\n                          <Circle className={`absolute -bottom-0.5 -right-0.5 w-4 h-4 ${\n                            u.isOnline ? 'text-green-500 fill-green-500' : 'text-gray-400 fill-gray-400'\n                          } bg-white rounded-full ring-2 ring-white`} />\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"font-bold text-[#212121]\">{u.displayName}</span>\n                            {u.isOnline && (\n                              <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold\">\n                                Online\n                              </span>\n                            )}\n                          </div>\n                          <div className=\"text-xs text-[#757575]\">{u.email}</div>\n                        </div>\n                      </label>\n                    ))\n                  )}\n                </div>\n\n                <div className=\"mb-5\">\n                  <label className=\"block text-sm font-bold text-[#757575] mb-2\">Primeira mensagem</label>\n                  <textarea\n                    value={firstMessage}\n                    onChange={(e) => setFirstMessage(e.target.value)}\n                    placeholder=\"Digite uma mensagem de introdu√ß√£o...\"\n                    className=\"w-full px-4 py-3 border-2 border-[#E0E0E0] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#16476A]/30 focus:border-[#16476A] transition-all font-medium resize-none\"\n                    rows={3}\n                    maxLength={500}\n                  />\n                  <div className=\"text-xs text-[#757575] mt-1 text-right\">\n                    {firstMessage.length}/500\n                  </div>\n                </div>\n\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={closeNew}\n                    disabled={creating}\n                    className=\"flex-1 px-4 py-3 border-2 border-[#E0E0E0] text-[#757575] rounded-xl font-bold hover:bg-[#F5F5F5] disabled:opacity-50 transition-all duration-300\"\n                  >\n                    Cancelar\n                  </button>\n                  <button\n                    onClick={createConversation}\n                    disabled={!selectedUserId || !firstMessage.trim() || creating}\n                    className=\"flex-1 px-4 py-3 bg-gradient-to-r from-[#16476A] to-[#132440] text-white rounded-xl font-bold hover:from-[#132440] hover:to-[#16476A] disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center gap-2 shadow-lg transition-all duration-300 hover:scale-105\"\n                  >\n                    {creating ? <RefreshCw className=\"w-5 h-5 animate-spin\" /> : <Send className=\"w-5 h-5\" />}\n                    {creating ? 'Criando...' : 'Iniciar Conversa'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Busca e Legenda */}\n        <div className=\"mb-6\">\n          <div className=\"bg-white rounded-2xl shadow-xl border border-[#E0E0E0] overflow-hidden\">\n            <div className=\"p-6\">\n              <div className=\"flex gap-3 mb-4\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"w-5 h-5 text-[#757575] absolute left-4 top-1/2 -translate-y-1/2\" />\n                  <input\n                    value={query}\n                    onChange={(e) => setQuery(e.target.value)}\n                    placeholder=\"Buscar conversas ou mensagens...\"\n                    className=\"w-full pl-12 pr-4 py-3 border-2 border-[#E0E0E0] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#16476A]/30 focus:border-[#16476A] transition-all font-medium\"\n                  />\n                </div>\n              </div>\n\n              {query && (\n                <div className=\"mb-4 p-3 bg-gradient-to-r from-blue-100 to-blue-50 rounded-xl border border-[#16476A]/20\">\n                  <div className=\"flex items-center gap-2 text-sm font-medium text-[#16476A]\">\n                    <Search className=\"w-4 h-4\" />\n                    Mostrando {filtered.length} de {data.length} conversas\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex items-center gap-6 text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <Circle className=\"w-3 h-3 text-green-500 fill-green-500\" />\n                  <span className=\"text-[#757575] font-medium\">Online</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Circle className=\"w-3 h-3 text-gray-400 fill-gray-400\" />\n                  <span className=\"text-[#757575] font-medium\">Offline</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Mail className=\"w-4 h-4 text-[#BF092F]\" />\n                  <span className=\"text-[#757575] font-medium\">N√£o lida</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Lista de conversas */}\n        <div className=\"bg-white rounded-2xl border border-[#E0E0E0] overflow-hidden shadow-xl\">\n          {loading && (\n            <div className=\"p-20 text-center\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-[#16476A] to-[#132440] mb-6 animate-pulse\">\n                <RefreshCw className=\"w-8 h-8 text-white animate-spin\" />\n              </div>\n              <p className=\"text-xl font-bold text-[#212121]\">Carregando conversas...</p>\n              <p className=\"text-sm text-[#757575] mt-2\">Buscando mensagens em tempo real</p>\n            </div>\n          )}\n\n          {!loading && error && (\n            <div className=\"p-20 text-center\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-[#BF092F] to-[#a50728] mb-6\">\n                <MessageSquare className=\"w-8 h-8 text-white\" />\n              </div>\n              <p className=\"text-xl font-bold text-[#BF092F] mb-4\">{error}</p>\n              <p className=\"text-sm text-[#757575] mb-6\">N√£o foi poss√≠vel carregar as conversas</p>\n              <button\n                onClick={fetchData}\n                className=\"inline-flex items-center gap-2 bg-gradient-to-r from-[#16476A] to-[#132440] hover:from-[#132440] hover:to-[#16476A] text-white px-6 py-3 rounded-xl font-bold shadow-lg transition-all duration-300 hover:scale-105\"\n              >\n                <RefreshCw className=\"w-5 h-5\" />\n                Tentar Novamente\n              </button>\n            </div>\n          )}\n\n          {!loading && !error && filtered.length === 0 && (\n            <div className=\"p-20 text-center\">\n              <div className=\"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-[#E0E0E0] to-[#BDBDBD] mb-6\">\n                <MessageSquare className=\"w-10 h-10 text-[#757575]\" />\n              </div>\n              <p className=\"text-xl font-bold text-[#212121] mb-2\">\n                {query ? 'Nenhuma conversa encontrada' : 'Nenhuma conversa'}\n              </p>\n              <p className=\"text-sm text-[#757575] mb-6\">\n                {query ? 'Tente ajustar os filtros de busca' : 'Clique em \"Nova Conversa\" para come√ßar a conversar'}\n              </p>\n              {!query && (\n                <button\n                  onClick={openNew}\n                  className=\"inline-flex items-center gap-2 bg-gradient-to-r from-[#16476A] to-[#132440] hover:from-[#132440] hover:to-[#16476A] text-white px-6 py-3 rounded-xl font-bold shadow-lg transition-all duration-300 hover:scale-105\"\n                >\n                  <Plus className=\"w-5 h-5\" />\n                  Nova Conversa\n                </button>\n              )}\n            </div>\n          )}\n\n          {!loading && !error && filtered.length > 0 && (\n            <div className=\"divide-y divide-[#E0E0E0]\">\n              {filtered.map((conv) => {\n                const otherUserId = conv.participants.find(p => p !== currentUserId);\n                const otherUserName = otherUserId ? conv.participantNames[otherUserId] : 'Usu√°rio';\n                const unreadCount = conv.unreadCount[currentUserId] || 0;\n                const hasUnread = unreadCount > 0;\n                const isMyLastMessage = conv.lastMessageBy === currentUserId;\n                const isOnline = otherUserId && conv.onlineStatus && conv.onlineStatus[otherUserId];\n\n                return (\n                  <Link\n                    key={conv.id}\n                    href={`/mensagens/${conv.id}`}\n                    className={`block p-5 hover:bg-gradient-to-r transition-all duration-300 group relative ${\n                      hasUnread\n                        ? 'hover:from-[#E3EFFF] hover:to-[#F0F7FF] bg-gradient-to-r from-[#F8FAFF] to-white'\n                        : 'hover:from-[#F8F9FA] hover:to-[#F5F5F5]'\n                    }`}\n                  >\n                    {hasUnread && (\n                      <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-[#16476A] to-[#132440]\"></div>\n                    )}\n\n                    <div className=\"flex items-start gap-4\">\n                      {/* Avatar */}\n                      <div className=\"relative flex-shrink-0\">\n                        <div className={`w-14 h-14 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg ${\n                          hasUnread\n                            ? 'bg-gradient-to-br from-[#16476A] to-[#132440] ring-4 ring-[#16476A]/20'\n                            : 'bg-gradient-to-br from-[#757575] to-[#616161]'\n                        }`}>\n                          {otherUserName.substring(0, 2).toUpperCase()}\n                        </div>\n\n                        {/* Indicador online */}\n                        <div className=\"absolute bottom-0 right-0 flex items-center justify-center\">\n                          <Circle className={`w-4 h-4 ${\n                            isOnline ? 'text-green-500 fill-green-500' : 'text-gray-400 fill-gray-400'\n                          } bg-white rounded-full ring-2 ring-white`} />\n                        </div>\n                      </div>\n\n                      {/* Conte√∫do */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center justify-between mb-1.5\">\n                          <h3 className={`font-bold text-base ${\n                            hasUnread ? 'text-[#16476A]' : 'text-[#212121]'\n                          } group-hover:text-[#16476A] transition-colors`}>\n                            {otherUserName}\n                          </h3>\n                          {conv.lastMessageAt && (\n                            <span className=\"text-xs text-[#757575] flex items-center gap-1 font-medium\">\n                              <Clock className=\"w-3.5 h-3.5\" />\n                              {formatTime(conv.lastMessageAt)}\n                            </span>\n                          )}\n                        </div>\n\n                        <div className=\"flex items-center justify-between gap-3\">\n                          <p className={`text-sm truncate ${\n                            hasUnread ? 'font-semibold text-[#212121]' : 'text-[#757575]'\n                          }`}>\n                            {isMyLastMessage && <span className=\"text-[#16476A]\">Voc√™: </span>}\n                            {conv.lastMessage || 'Sem mensagens ainda'}\n                          </p>\n                          {hasUnread && unreadCount > 0 && (\n                            <span className=\"flex-shrink-0 bg-gradient-to-r from-[#BF092F] to-[#a50728] text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-md\">\n                              {unreadCount > 99 ? '99+' : unreadCount}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n\n                      <ChevronRight className=\"w-5 h-5 text-[#757575] flex-shrink-0 self-center group-hover:text-[#16476A] group-hover:translate-x-1 transition-all\" />\n                    </div>\n                  </Link>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1667, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}